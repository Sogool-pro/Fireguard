import{i as be,g as je,a as we,b as Ne,r as H,o as B,u as ie}from"./firebase-BWT5hCBR.js";var Je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var q={exports:{}},L={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var te;function Ee(){if(te)return L;te=1;var t=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function a(o,s,p){var g=null;if(p!==void 0&&(g=""+p),s.key!==void 0&&(g=""+s.key),"key"in s){p={};for(var y in s)y!=="key"&&(p[y]=s[y])}else p=s;return s=p.ref,{$$typeof:t,type:o,key:g,ref:s!==void 0?s:null,props:p}}return L.Fragment=i,L.jsx=a,L.jsxs=a,L}var re;function Ce(){return re||(re=1,q.exports=Ee()),q.exports}var r=Ce(),G={exports:{}},u={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ne;function Re(){if(ne)return u;ne=1;var t=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),p=Symbol.for("react.consumer"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),d=Symbol.iterator;function j(e){return e===null||typeof e!="object"?null:(e=d&&e[d]||e["@@iterator"],typeof e=="function"?e:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,O={};function N(e,n,c){this.props=e,this.context=n,this.refs=O,this.updater=c||T}N.prototype.isReactComponent={},N.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")},N.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function h(){}h.prototype=N.prototype;function S(e,n,c){this.props=e,this.context=n,this.refs=O,this.updater=c||T}var P=S.prototype=new h;P.constructor=S,w(P,N.prototype),P.isPureReactComponent=!0;var Q=Array.isArray,v={H:null,A:null,T:null,S:null,V:null},Z=Object.prototype.hasOwnProperty;function U(e,n,c,l,m,_){return c=_.ref,{$$typeof:t,type:e,key:n,ref:c!==void 0?c:null,props:_}}function pe(e,n){return U(e.type,n,void 0,void 0,void 0,e.props)}function V(e){return typeof e=="object"&&e!==null&&e.$$typeof===t}function xe(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(c){return n[c]})}var X=/\/+/g;function Y(e,n){return typeof e=="object"&&e!==null&&e.key!=null?xe(""+e.key):n.toString(36)}function K(){}function he(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(K,K):(e.status="pending",e.then(function(n){e.status==="pending"&&(e.status="fulfilled",e.value=n)},function(n){e.status==="pending"&&(e.status="rejected",e.reason=n)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function k(e,n,c,l,m){var _=typeof e;(_==="undefined"||_==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(_){case"bigint":case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case t:case i:f=!0;break;case x:return f=e._init,k(f(e._payload),n,c,l,m)}}if(f)return m=m(e),f=l===""?"."+Y(e,0):l,Q(m)?(c="",f!=null&&(c=f.replace(X,"$&/")+"/"),k(m,n,c,"",function(ye){return ye})):m!=null&&(V(m)&&(m=pe(m,c+(m.key==null||e&&e.key===m.key?"":(""+m.key).replace(X,"$&/")+"/")+f)),n.push(m)),1;f=0;var z=l===""?".":l+":";if(Q(e))for(var E=0;E<e.length;E++)l=e[E],_=z+Y(l,E),f+=k(l,n,c,_,m);else if(E=j(e),typeof E=="function")for(e=E.call(e),E=0;!(l=e.next()).done;)l=l.value,_=z+Y(l,E++),f+=k(l,n,c,_,m);else if(_==="object"){if(typeof e.then=="function")return k(he(e),n,c,l,m);throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.")}return f}function D(e,n,c){if(e==null)return e;var l=[],m=0;return k(e,l,"","",function(_){return n.call(c,_,m++)}),l}function ve(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(c){(e._status===0||e._status===-1)&&(e._status=1,e._result=c)},function(c){(e._status===0||e._status===-1)&&(e._status=2,e._result=c)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var ee=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function ge(){}return u.Children={map:D,forEach:function(e,n,c){D(e,function(){n.apply(this,arguments)},c)},count:function(e){var n=0;return D(e,function(){n++}),n},toArray:function(e){return D(e,function(n){return n})||[]},only:function(e){if(!V(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},u.Component=N,u.Fragment=a,u.Profiler=s,u.PureComponent=S,u.StrictMode=o,u.Suspense=R,u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=v,u.__COMPILER_RUNTIME={__proto__:null,c:function(e){return v.H.useMemoCache(e)}},u.cache=function(e){return function(){return e.apply(null,arguments)}},u.cloneElement=function(e,n,c){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var l=w({},e.props),m=e.key,_=void 0;if(n!=null)for(f in n.ref!==void 0&&(_=void 0),n.key!==void 0&&(m=""+n.key),n)!Z.call(n,f)||f==="key"||f==="__self"||f==="__source"||f==="ref"&&n.ref===void 0||(l[f]=n[f]);var f=arguments.length-2;if(f===1)l.children=c;else if(1<f){for(var z=Array(f),E=0;E<f;E++)z[E]=arguments[E+2];l.children=z}return U(e.type,m,void 0,void 0,_,l)},u.createContext=function(e){return e={$$typeof:g,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:p,_context:e},e},u.createElement=function(e,n,c){var l,m={},_=null;if(n!=null)for(l in n.key!==void 0&&(_=""+n.key),n)Z.call(n,l)&&l!=="key"&&l!=="__self"&&l!=="__source"&&(m[l]=n[l]);var f=arguments.length-2;if(f===1)m.children=c;else if(1<f){for(var z=Array(f),E=0;E<f;E++)z[E]=arguments[E+2];m.children=z}if(e&&e.defaultProps)for(l in f=e.defaultProps,f)m[l]===void 0&&(m[l]=f[l]);return U(e,_,void 0,void 0,null,m)},u.createRef=function(){return{current:null}},u.forwardRef=function(e){return{$$typeof:y,render:e}},u.isValidElement=V,u.lazy=function(e){return{$$typeof:x,_payload:{_status:-1,_result:e},_init:ve}},u.memo=function(e,n){return{$$typeof:A,type:e,compare:n===void 0?null:n}},u.startTransition=function(e){var n=v.T,c={};v.T=c;try{var l=e(),m=v.S;m!==null&&m(c,l),typeof l=="object"&&l!==null&&typeof l.then=="function"&&l.then(ge,ee)}catch(_){ee(_)}finally{v.T=n}},u.unstable_useCacheRefresh=function(){return v.H.useCacheRefresh()},u.use=function(e){return v.H.use(e)},u.useActionState=function(e,n,c){return v.H.useActionState(e,n,c)},u.useCallback=function(e,n){return v.H.useCallback(e,n)},u.useContext=function(e){return v.H.useContext(e)},u.useDebugValue=function(){},u.useDeferredValue=function(e,n){return v.H.useDeferredValue(e,n)},u.useEffect=function(e,n,c){var l=v.H;if(typeof c=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return l.useEffect(e,n)},u.useId=function(){return v.H.useId()},u.useImperativeHandle=function(e,n,c){return v.H.useImperativeHandle(e,n,c)},u.useInsertionEffect=function(e,n){return v.H.useInsertionEffect(e,n)},u.useLayoutEffect=function(e,n){return v.H.useLayoutEffect(e,n)},u.useMemo=function(e,n){return v.H.useMemo(e,n)},u.useOptimistic=function(e,n){return v.H.useOptimistic(e,n)},u.useReducer=function(e,n,c){return v.H.useReducer(e,n,c)},u.useRef=function(e){return v.H.useRef(e)},u.useState=function(e){return v.H.useState(e)},u.useSyncExternalStore=function(e,n,c){return v.H.useSyncExternalStore(e,n,c)},u.useTransition=function(){return v.H.useTransition()},u.version="19.1.0",u}var se;function Oe(){return se||(se=1,G.exports=Re()),G.exports}var b=Oe();const M=_e(b),Te={apiKey:"AIzaSyDBJ5gpJCs-N5-QT0_OfPZrPTRCu4Dv6eg",authDomain:"fireguardiot.firebaseapp.com",databaseURL:"https://fireguardiot-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"fireguardiot",storageBucket:"fireguardiot.firebasestorage.app",messagingSenderId:"788884680702",appId:"1:788884680702:web:c08aae85b2667c27a35aaf"},J=be(Te),Qe=je(J),I=we(J),Ze=Ne(J),Se="/Fireguard/assets/buzzer-Bj0YxM6P.mp3",ce=b.createContext();function le(){return b.useContext(ce)}function Xe({children:t}){const[i,a]=b.useState([]),[o,s]=b.useState(!1),[p,g]=b.useState(!1),y=b.useRef(null);b.useEffect(()=>{const x=H(I,"sensor_data"),d=B(x,j=>{const T=j.val()||{},w=Date.now(),O=Object.entries(T).map(([N,h])=>{let S=w;if(h.timestamp)try{S=new Date(h.timestamp.replace(" ","T")).getTime()}catch{S=w}return{nodeId:N,roomName:`ROOM NO. ${N.replace("NODE","")}`,temperature:h.temperature??0,humidity:h.humidity??0,smoke:h.Gas_and_Smoke??0,carbonMonoxide:h.carbon_monoxide??0,flame:h.flame??0,fire:h.flame===1||h.alert_level&&h.alert_level.toLowerCase()==="alert",status:h.alert_active===!1||h.silenced?"Silenced":"Active",alert_level:h.alert_level,alert_message:h.alert_message,silenced:h.silenced,lastUpdated:S,isOffline:!1,sensorTimestampString:h.timestamp}});a(N=>O.map(h=>{const S=N.find(P=>P.nodeId===h.nodeId);return S?{...h,roomName:S.customName||h.roomName,customName:S.customName,isOffline:S.isOffline}:h}))});return()=>d()},[]),b.useEffect(()=>{const x=setInterval(()=>{const d=Date.now(),j=6e4;a(T=>T.map(w=>{const N=d-(w.lastUpdated||d)>j;return N&&!w.isOffline?(w.nodeId&&ie(H(I,`sensor_data/${w.nodeId}`),{silenced:!0}).catch(h=>console.error("Failed to silence offline room:",h)),{...w,isOffline:!0,status:"Offline",temperature:0,humidity:0,smoke:0,carbonMonoxide:0,flame:0,fire:!1,silenced:!0}):!N&&w.isOffline?{...w,isOffline:!1,status:w.status==="Offline"?"Active":w.status}:w}))},5e3);return()=>clearInterval(x)},[]),b.useEffect(()=>{const x=H(I,"room_names"),d=B(x,j=>{const T=j.val()||{};a(w=>w.map(O=>{if(!O.nodeId)return O;const N=T[O.nodeId];return N?{...O,roomName:N,customName:N}:{...O}}))});return()=>d()},[]),b.useEffect(()=>{const x=H(I,"room_meta"),d=B(x,j=>{const T=j.val()||{};a(w=>w.map(O=>{if(!O.nodeId)return O;const N=T[O.nodeId]||{};return{...O,archived:!!N.archived,onRepair:!!N.onRepair}}))});return()=>d()},[]),b.useEffect(()=>{const x=y.current;x&&(o?(x.loop=!0,x.currentTime=0,x.play().catch(d=>{console.log("Buzzer play failed:",d),g(!1)})):(x.pause(),x.currentTime=0))},[o]),b.useEffect(()=>{const x=i.some(d=>{const j=d.fire||d.temperature>55||d.smoke>600||d.carbonMonoxide>70,T=d.alert_level&&d.alert_level.toLowerCase()==="alert";return(j||T)&&d.silenced!==!0});s(x)},[i]);const R=()=>{g(!0),o&&y.current&&y.current.play().catch(console.error)},A=()=>{y.current&&(y.current.loop=!1,y.current.currentTime=0,y.current.play().catch(console.error))};return r.jsxs(ce.Provider,{value:{rooms:i,setRooms:a,buzzerOn:o,setBuzzerOn:s,audioEnabled:p,enableAudio:R,testBuzzer:A},children:[r.jsx("audio",{ref:y,src:Se,preload:"auto"}),t]})}var ue={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ae=M.createContext&&M.createContext(ue),Ae=["attr","size","title"];function ze(t,i){if(t==null)return{};var a=Me(t,i),o,s;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(t);for(s=0;s<p.length;s++)o=p[s],!(i.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(a[o]=t[o])}return a}function Me(t,i){if(t==null)return{};var a={};for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){if(i.indexOf(o)>=0)continue;a[o]=t[o]}return a}function $(){return $=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},$.apply(this,arguments)}function oe(t,i){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,o)}return a}function F(t){for(var i=1;i<arguments.length;i++){var a=arguments[i]!=null?arguments[i]:{};i%2?oe(Object(a),!0).forEach(function(o){Pe(t,o,a[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):oe(Object(a)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(a,o))})}return t}function Pe(t,i,a){return i=ke(i),i in t?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,t}function ke(t){var i=He(t,"string");return typeof i=="symbol"?i:i+""}function He(t,i){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var o=a.call(t,i);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}function de(t){return t&&t.map((i,a)=>M.createElement(i.tag,F({key:a},i.attr),de(i.child)))}function C(t){return i=>M.createElement(Ie,$({attr:F({},t.attr)},i),de(t.child))}function Ie(t){var i=a=>{var{attr:o,size:s,title:p}=t,g=ze(t,Ae),y=s||a.size||"1em",R;return a.className&&(R=a.className),t.className&&(R=(R?R+" ":"")+t.className),M.createElement("svg",$({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,o,g,{className:R,style:F(F({color:t.color||a.color},a.style),t.style),height:y,width:y,xmlns:"http://www.w3.org/2000/svg"}),p&&M.createElement("title",null,p),t.children)};return ae!==void 0?M.createElement(ae.Consumer,null,a=>i(a)):i(ue)}function Ke(t){return C({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"},child:[]}]})(t)}function Le(t){return C({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4z"},child:[]}]})(t)}function et(t){return C({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function tt(t){return C({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function rt(t){return C({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function De(t){return C({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M323.56 51.2c-20.8 19.3-39.58 39.59-56.22 59.97C240.08 73.62 206.28 35.53 168 0 69.74 91.17 0 209.96 0 281.6 0 408.85 100.29 512 224 512s224-103.15 224-230.4c0-53.27-51.98-163.14-124.44-230.4zm-19.47 340.65C282.43 407.01 255.72 416 226.86 416 154.71 416 96 368.26 96 290.75c0-38.61 24.31-72.63 72.79-130.75 6.93 7.98 98.83 125.34 98.83 125.34l58.63-66.88c4.14 6.85 7.91 13.55 11.27 19.97 27.35 52.19 15.81 118.97-33.43 153.42z"},child:[]}]})(t)}function fe(t){return C({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function nt(t){return C({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(t)}function st(t){return C({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}function at(t){return C({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function Be(t){return C({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M400 54.1c63 45 104 118.6 104 201.9 0 136.8-110.8 247.7-247.5 248C120 504.3 8.2 393 8 256.4 7.9 173.1 48.9 99.3 111.8 54.2c11.7-8.3 28-4.8 35 7.7L162.6 90c5.9 10.5 3.1 23.8-6.6 31-41.5 30.8-68 79.6-68 134.9-.1 92.3 74.5 168.1 168 168.1 91.6 0 168.6-74.2 168-169.1-.3-51.8-24.7-101.8-68.1-134-9.7-7.2-12.4-20.5-6.5-30.9l15.8-28.1c7-12.4 23.2-16.1 34.8-7.8zM296 264V24c0-13.3-10.7-24-24-24h-32c-13.3 0-24 10.7-24 24v240c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24z"},child:[]}]})(t)}function ot(t){return C({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(t)}function $e(t){return C({attr:{viewBox:"0 0 256 512"},child:[{tag:"path",attr:{d:"M192 384c0 35.346-28.654 64-64 64s-64-28.654-64-64c0-23.685 12.876-44.349 32-55.417V224c0-17.673 14.327-32 32-32s32 14.327 32 32v104.583c19.124 11.068 32 31.732 32 55.417zm32-84.653c19.912 22.563 32 52.194 32 84.653 0 70.696-57.303 128-128 128-.299 0-.609-.001-.909-.003C56.789 511.509-.357 453.636.002 383.333.166 351.135 12.225 321.755 32 299.347V96c0-53.019 42.981-96 96-96s96 42.981 96 96v203.347zM208 384c0-34.339-19.37-52.19-32-66.502V96c0-26.467-21.533-48-48-48S80 69.533 80 96v221.498c-12.732 14.428-31.825 32.1-31.999 66.08-.224 43.876 35.563 80.116 79.423 80.42L128 464c44.112 0 80-35.888 80-80z"},child:[]}]})(t)}function it(t){return C({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function ct(t){return C({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function Fe(t){return C({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14 9h-3c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1zm-.5 4.5h-2v-3h2v3zM8 13v1c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1H6.5v-.5h-2v3h2V13H8zm12.5 2.5h-2v1h3V18H17v-2.5c0-.55.45-1 1-1h2v-1h-3V12h3.5c.55 0 1 .45 1 1v1.5c0 .55-.45 1-1 1z"},child:[]}]})(t)}function Ue(t){return C({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M285.217 21.693c-20.432 0-39.6 6.673-52.758 18.116a52.77 52.77 0 0 0-29.992-9.319c-27.782 0-50.634 21.518-52.762 48.764-17.989 4.957-30.848 21.368-30.848 40.615 0 2.546.23 5.083.684 7.578a42.114 42.114 0 0 0-4.475 18.907c0 23.238 18.907 42.144 42.147 42.144a42.43 42.43 0 0 0 7.226-.62 42.079 42.079 0 0 0 5.127 8.169c-17.365 3.331-27.068 17.163-23.345 36.023-9.295 4.607-16.864 6.201-17.215 18.268-.287 9.866 4.916 19.01 13.23 25.56-8.313 6.551-13.23 15.688-13.23 25.559 0 11.29 10.352 21.682 17.578 28.43-7.416 9.693-7.927 24.998-.26 38.154a42.132 42.132 0 0 0 2.319 3.55l-14.622 49.35 48.41-30.365c7.12-.444 13.244-.91 20.034.135 9.918 0 19.376-4.4 26.556-12.22 1.62.17 3.249.257 4.874.257 25.411 0 46.085-20.675 46.085-46.086 0-2.986-.28-5.93-.84-8.816a45.982 45.982 0 0 0 30.766-28.307 53.207 53.207 0 0 0 22.826-14.262c27.667-.156 51.635-19.979 57.22-46.777 14.92-10.424 24.054-26.876 24.995-45.043 17.787-6.679 29.75-23.623 29.75-43.103 0-24.373-19.02-44.386-42.994-45.985-3.62-21.824-22.627-38.517-45.465-38.517-1.04 0-2.083.036-3.125.107-7.462-23.425-35.047-40.266-67.896-40.266zm0 15.34c28.138 0 52.012 15.151 54.35 34.492l.083.698a51.338 51.73 58.185 0 0-35.54-13.928 51.338 51.73 58.185 0 0-42.788 22.982 51.338 51.73 58.185 0 1 34.71-13.677 51.338 51.73 58.185 0 1 51.622 51.095 51.338 51.73 58.185 0 1-8.836 28.813 51.338 51.73 58.185 0 0 16.912-38.12 51.338 51.73 58.185 0 0-10.193-30.523c3.526-.872 6.907-1.602 10.701-1.674 16.927 0 30.702 13.751 30.746 30.666l-.004 8.78c3.972-.408 7.78-.934 11.63-1.03 16.952 0 30.745 13.793 30.745 30.747 0 14.39-9.782 26.702-23.789 29.94l-6.24 1.444c.14 2.93.32 5.766.361 8.596 0 15.208-7.747 29.054-20.728 37.037l-3.055 1.88-.517 3.55c-3.077 21.17-21.556 37.137-42.985 37.137-1.984-.037-4.382-.182-6.525-.319l-2.48 3.05c-5.593 6.703-15.643 12.085-25.756 14.042-3.61 13.826-12.052 23.304-28.834 27.416l-10.723.72 4.166 9.907a30.548 30.548 0 0 1 2.39 11.908c0 16.952-13.791 30.744-30.744 30.744-3.42-.014-7.57-.86-11.267-1.705-5.517 7.533-9.416 11.997-20.162 13.666-7.755-.104-16.407-1.755-24.881.137l-17.32 10.865 3.67-12.39 2.054-5.739c-2.457-2.702-4.556-4.808-6.406-7.922-5.274-9.049-4.483-19.75 1.725-23.367a7.895 7.895 0 0 0 3.859-5.933c.482-4.382-2.163-6.832-6.549-10.893-3.903-3.613-14.267-13.208-14.267-18.666 0-7.757 6.442-14.938 16.416-18.291l21.625-7.273-21.627-7.268c-9.973-3.353-16.416-10.531-16.416-18.29.073-3.95 13.25-8.191 16.658-11.923-3.117-13.318.236-24.377 16.379-27.766 3.543.017 7.793 1.059 11.572 2.014 3.281-5.129 6.593-9.94 10.791-14.57l-8.787-4.184a26.781 26.781 0 0 1-14.371-17.217l-2.19-8.115c-6.017 2.228-10.79 4.46-17.187 4.582-14.78 0-26.805-12.025-26.805-26.804 0-4.87 1.318-9.636 3.815-13.788l1.666-2.77c-.912-3.486-1.655-6.212-1.692-9.927 0-13.722 10.273-25.176 23.893-26.644l7.183-.776c-.145-3.05-.336-6.076-.39-9.035 0-20.723 16.859-37.582 37.582-37.582 9.41 0 18.415 3.496 25.355 9.846l5.73 5.242 5.173-5.795c10.11-11.329 27.489-18.092 46.492-18.092zM197.918 94.57a32.165 36.96 23.458 0 0-32.527 23.436 32.165 36.96 23.458 0 0 14.793 46.709 32.165 36.96 23.458 0 0 1.879.726 29.767 34.204 23.458 0 1-7.801-39.632 29.767 34.204 23.458 0 1 40.922-19.528 29.767 34.204 23.458 0 1 1.09.553A28.302 24.27 9.276 0 0 203 124.578a28.302 24.27 9.276 0 0-.125 1.795 31.074 24.307 5.708 0 1 30.03-11.076 31.074 24.307 5.708 0 1 26.12 17.086 28.302 24.27 9.276 0 0 .108-.61 28.302 24.27 9.276 0 0-25.278-27.712 28.302 24.27 9.276 0 0-4.812-.262 28.302 24.27 9.276 0 0-8.65 1.4 32.165 36.96 23.458 0 0-10.784-8.295 32.165 36.96 23.458 0 0-11.691-2.334zm49.937 139.287a40.384 34.941 14.833 0 0-37.214 24.973 40.384 34.941 14.833 0 0-.96 6.922 36.66 31.72 18.087 0 1 .098-.344 36.66 31.72 18.087 0 1 44.698-18.77 36.66 31.72 18.087 0 1 25.002 41.536 36.66 31.72 18.087 0 1-7.325 11.525 40.384 34.941 14.833 0 0 16.563-20.191 40.384 34.941 14.833 0 0-30.094-44.115 40.384 34.941 14.833 0 0-10.768-1.536zm-132.992 161.33c-26.266 0-47.56 21.295-47.56 47.56 0 26.267 21.294 47.56 47.56 47.56 26.266 0 47.56-21.293 47.56-47.56 0-6.873-1.46-13.403-4.083-19.304-1.404-3.158-18.367 19.305-33.215 9.205-7.087-4.82-1.849-19.877 1.479-28.734 1.45-3.864 2.539-6.547 2.082-6.685a47.607 47.607 0 0 0-13.823-2.041zm-15.115 16.526c1.147.213-9.03 13.996 1.275 36.846 2.068 4.587-.27 10.01-4.996 12.017-4.725 2.009-10.15-.116-12.117-4.744-1.967-4.633.043-33.362 15.084-43.744.396-.273.635-.397.754-.375z"},child:[]}]})(t)}const me=b.createContext();function Ve(){return b.useContext(me)}function lt({children:t}){const[i,a]=b.useState({open:!1,room:null}),o=b.useCallback(p=>{a({open:!0,room:p})},[]),s=b.useCallback(()=>{a({open:!1,room:null})},[]);return r.jsx(me.Provider,{value:{showRoomChart:o,closeRoomChart:s,modal:i},children:t})}function W({alert_level:t,status:i,fire:a,temperature:o,smoke:s,carbonMonoxide:p}){if(i!=="Active")return"";const g=a||o>55||s>600||p>70;return t&&t.toLowerCase()==="warning"?"blink-yellow":g||t&&t.toLowerCase()==="alert"?"blink-red":""}function Ye(t){const{rooms:i,setRooms:a,setBuzzerOn:o}=le(),s=t,{showRoomChart:p}=Ve(),[g,y]=b.useState(60),R=W(s);M.useEffect(()=>{if(s.isOffline){o(!1);return}R?o(!0):i.some(d=>d.nodeId&&s.nodeId?W(d)&&d.nodeId!==s.nodeId:W(d)&&d.roomName!==s.roomName)||o(!1)},[R,i,o,s.isOffline]),b.useEffect(()=>{const x=setInterval(()=>{const d=Date.now(),j=6e4,T=d-(s.lastUpdated||d),w=Math.max(0,Math.ceil((j-T)/1e3));y(w)},1e3);return()=>clearInterval(x)},[s.lastUpdated]);const A=()=>{a(d=>d.map(j=>j.nodeId===s.nodeId?{...j,status:j.status==="Active"?"Silenced":"Active"}:j));let x=null;if(s.nodeId)x=s.nodeId;else{const d=s.roomName.match(/ROOM NO\. ?(\d+)/i);d&&(x=`NODE${d[1]}`)}x&&ie(H(I,`sensor_data/${x}`),{silenced:s.status==="Active"})};return r.jsxs("div",{className:`rounded-2xl shadow-md p-6 w-full max-w-full transition duration-300 transform hover:-translate-y-1 cursor-pointer ${s.isOffline?"bg-gray-300":R||"bg-white"}`,onClick:()=>p(s),children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(fe,{className:"text-2xl md:text-3xl text-gray-800"}),r.jsx("span",{className:"text-xl md:text-2xl font-bold text-gray-800",children:s.roomName})]}),r.jsx("button",{onClick:x=>{x.stopPropagation(),A()},className:`p-1 rounded-full transition-colors cursor-pointer ${s.status==="Active"?"bg-green-100 hover:bg-green-200":"bg-gray-200 hover:bg-gray-300"}`,"aria-label":"Toggle Room Status",children:r.jsx(Be,{className:`text-2xl ${s.status==="Active"?"text-green-600":"text-gray-500"}`})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-y-4 gap-x-6 mb-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-semibold text-gray-700 flex items-center gap-1",children:"Temperature"}),r.jsxs("div",{className:"flex items-center gap-1 text-lg font-bold text-gray-800",children:[s.isOffline?0:s.temperature,"°C",r.jsx($e,{className:"text-base text-gray-500"})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-semibold text-gray-700 flex items-center gap-1",children:"Carbon monoxide"}),r.jsxs("div",{className:"flex items-center gap-1 text-lg font-bold text-gray-800",children:[s.isOffline?0:s.carbonMonoxide,r.jsx("span",{className:"text-xs font-normal text-gray-500",children:"ratio"}),r.jsx(Fe,{className:"text-2xl text-gray-500"})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-semibold text-gray-700 flex items-center gap-1",children:"Humidity"}),r.jsxs("div",{className:"flex items-center gap-1 text-lg font-bold text-gray-800",children:[s.isOffline?0:s.humidity,"%",r.jsx(Le,{className:"text-base text-gray-500"})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-semibold text-gray-700 flex items-center gap-1",children:"Smoke and Gas"}),r.jsxs("div",{className:"flex items-center gap-1 text-lg font-bold text-gray-800",children:[s.isOffline?0:s.smoke,r.jsx("span",{className:"text-xs font-normal text-gray-500",children:"ratio"}),r.jsx(Ue,{className:"text-2xl text-gray-500"})]})]})]}),r.jsx("hr",{className:"my-2 border-gray-300"}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx("span",{className:"text-sm md:text-lg font-semibold text-gray-700",children:"Status"}),r.jsx("span",{className:"text-sm md:text-lg font-bold text-gray-800",children:s.status})]}),!s.isOffline&&r.jsxs("div",{className:"mt-2 text-xs text-gray-500 flex items-center justify-between",children:[r.jsxs("span",{children:["Last Update: ",s.sensorTimestampString||"N/A"]}),r.jsxs("span",{className:`px-2 py-1 rounded ${g<=10?"bg-red-100 text-red-700 font-semibold":g<=30?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:["Offline in: ",g,"s"]})]})]})}const qe=[{key:"totalRooms",label:"Total Rooms",icon:r.jsx(fe,{className:"text-white text-lg "}),iconBg:"bg-black",valueClass:"text-black"},{key:"alertsToday",label:"Alerts within the day",icon:r.jsx(De,{className:"text-white text-lg"}),iconBg:"bg-red-500",valueClass:"text-red-600"}];function Ge({totalRooms:t,alertsToday:i}){const a={totalRooms:t,alertsToday:i};return r.jsx("div",{className:" bg-white shadow-sm rounded-xl p-4 mb-6 flex flex-col sm:flex-row items-center justify-between gap-4",children:qe.map(o=>r.jsxs("div",{className:"flex flex-row items-center gap-2 flex-1 justify-center",children:[r.jsx("span",{className:`w-8 h-8 flex items-center justify-center rounded-full shadow ${o.iconBg}`,children:o.icon}),r.jsx("span",{className:"text-gray-500 text-xs font-medium tracking-wide uppercase",children:o.label}),r.jsx("span",{className:`text-xl font-bold ${o.valueClass} ml-2`,children:a[o.key]})]},o.key))})}function ut(){const{rooms:t}=le(),[i,a]=b.useState(0),[o,s]=b.useState(!1);return b.useEffect(()=>{const p=H(I,"alerts"),g=B(p,y=>{const R=y.val()||{};let A=0;const d=new Date().toISOString().slice(0,10);Object.values(R).forEach(j=>{if(!j||!j.timestamp)return;j.timestamp.slice(0,10)===d&&A++}),a(A)});return()=>g()},[]),r.jsxs("div",{className:"p-4 md:ml-5 flex flex-col min-h-screen text-sm md:text-base bg-gray-50",children:[(()=>{const p=t.filter(g=>!g.archived);return r.jsxs(r.Fragment,{children:[r.jsx(Ge,{totalRooms:p.length,alertsToday:i}),r.jsx("div",{className:"flex flex-wrap justify-center gap-6 px-4 mb-24 md:mb-32",children:p.map((g,y)=>r.jsx("div",{className:"flex justify-center flex-grow flex-shrink basis-[240px] max-w-[320px]",children:r.jsx(Ye,{...g})},g.nodeId||y))})]})})(),r.jsx("footer",{className:"sticky bottom-0 w-full z-10 mt-auto",children:r.jsxs("div",{className:"bg-gray-700 backdrop-blur-sm rounded-xl shadow-md p-3 md:p-3 flex flex-col md:flex-row md:items-center md:justify-center gap-3 md:gap-4 text-xs md:text-sm border border-gray-700",children:[r.jsxs("div",{className:"md:hidden flex items-center justify-between w-full",children:[r.jsx("span",{className:"font-semibold text-white",children:"Legend:"}),r.jsx("button",{className:"text-xs px-2 py-1 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",onClick:()=>s(p=>!p),"aria-expanded":o,"aria-controls":"mobile-legend-details",children:o?"Hide details":"Show details"})]}),r.jsxs("div",{className:"w-full text-gray-300",children:[r.jsxs("div",{id:"mobile-legend-details",className:`${o?"block":"hidden"} md:hidden text-gray-300`,children:[r.jsxs("span",{className:"mr-3 md:mr-4 block",children:[r.jsx("span",{className:"font-semibold text-white",children:"Temperature:"})," ","Normal ","≤","35°C, Warning 36-50°C, Alert ",">","50°C"]}),r.jsxs("span",{className:"mr-3 md:mr-4 block",children:[r.jsx("span",{className:"font-semibold text-white",children:"Smoke and Gas (ratio):"})," ","Normal ","≤","1.5, Warning 1.6-3.0, Alert ",">","3.0"]}),r.jsxs("span",{className:"mr-3 md:mr-4 block",children:[r.jsx("span",{className:"font-semibold text-white",children:"CO (ratio):"})," ","Normal ","≤","1.5, Warning 1.6-3.0, Alert ",">","3.0"]}),r.jsxs("span",{className:"mr-3 md:mr-4 block",children:[r.jsx("span",{className:"font-semibold text-white",children:"Humidity:"})," ","Normal ","≤","80%, Warning 81-100%, Alert ",">","100%"]}),r.jsxs("span",{className:"block",children:[r.jsx("span",{className:"font-semibold text-white",children:"Flame:"})," Alert if detected"]})]}),r.jsxs("div",{className:"hidden md:flex md:items-center md:justify-center md:gap-6 w-full",children:[r.jsxs("div",{className:"flex flex-col items-start ml-16 mr-4",children:[r.jsx("span",{className:"font-semibold text-white mb-2 ml-16",children:"Legend:"}),r.jsxs("div",{className:"flex items-center gap-2 mb-2 ml-16",children:[r.jsx("span",{className:"inline-block w-4 h-4 rounded-[4px] bg-yellow-400 animate-pulse"}),r.jsx("span",{className:"text-gray-300",children:"Warning"})]}),r.jsxs("div",{className:"flex items-center gap-2 ml-16",children:[r.jsx("span",{className:"inline-block w-4 h-4 rounded-[4px] bg-red-500 animate-pulse"}),r.jsx("span",{className:"text-gray-300",children:"Alert"})]})]}),r.jsxs("div",{className:"grid grid-cols-5 gap-x-16 text-sm mx-auto mt-2 text-gray-300",children:[r.jsx("div",{className:"font-semibold",children:"Temperature"}),r.jsx("div",{className:"font-semibold",children:"Smoke and Gas"}),r.jsx("div",{className:"font-semibold",children:"Carbon monoxide"}),r.jsx("div",{className:"font-semibold",children:"Humidity"}),r.jsx("div",{className:"font-semibold",children:"Flame"}),r.jsx("div",{children:"36-50°C"}),r.jsx("div",{children:"1.6-3.0 ratio"}),r.jsx("div",{children:"1.6-3.0 ratio"}),r.jsx("div",{children:"81-100%"}),r.jsx("div",{className:"text-gray-500 mt-2",children:"—"}),r.jsx("div",{children:"Above 50°C"}),r.jsx("div",{children:"Above 3.0 ratio"}),r.jsx("div",{children:"Above 3.0 ratio"}),r.jsx("div",{children:"Above 100%"}),r.jsx("div",{children:"If detected"})]})]})]})]})})]})}export{ut as D,ct as F,Xe as R,Oe as a,Qe as b,tt as c,I as d,ot as e,Ze as f,_e as g,it as h,nt as i,r as j,fe as k,et as l,Ke as m,at as n,st as o,rt as p,$e as q,b as r,Ve as s,lt as t,le as u,M as v,Je as w};
